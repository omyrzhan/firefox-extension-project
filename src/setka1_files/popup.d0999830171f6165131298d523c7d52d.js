function callbackXHR(){var _document_getElementById_elements=document.getElementById("callbackOrderForm").elements,tmp=_document_getElementById_elements.phone,_ref=tmp===void 0?{}:tmp,tmp1=_ref.value,phoneValue=tmp1===void 0?"":tmp1,tmp2=_document_getElementById_elements.name,_ref1=tmp2===void 0?{}:tmp2,tmp3=_ref1.value,nameValue=tmp3===void 0?"":tmp3;var data={data:{attributes:{phone:phoneValue,name:nameValue}}};var success=function(param){var _param_data=param.data,message=_param_data.attributes.message;$("#feedback_preloader").hide();$("#callBack").show();alerts(dictionary.message,message,2);$("#help_popup").arcticmodal("close")};var error=function(param){var tmp=param.data,_ref=tmp===void 0?{}:tmp,_ref_errors=_ref.errors,errors=_ref_errors===void 0?[]:_ref_errors;var message=errors.reduce(function(errorMessage,param){var detail=param.detail,title=param.title;return"".concat(errorMessage," \n ").concat(detail!==null&&detail!==void 0?detail:title)},"");$("#feedback_preloader").hide();$("#callBack").show();alerts(dictionary.message,message,0)};var headers={Accept:"application/vnd.api+json"};$.ajax({url:"user/callback/request",type:"POST",data:data,success:success,error:error,headers:headers})}function callbackRequest(){$("#feedback_preloader").show();$("#callBack").hide();callbackXHR()}var Popup={params_modal:{type:"html",overlay:{css:{backgroundColor:"#000",opacity:.7}},content:null,beforeClose:function beforeClose(){},afterOpen:function afterOpen(){},afterClose:function afterClose(){}},params_ajax:{url:"",type:"GET",async:false,cache:false},common_params:{opening:{}},finalFunction:function finalFunction(){},arcticmodal:function arcticmodal(){$.arcticmodal(this.params_modal)},getContent:function getContent(){try{var content=$.ajax(this.params_ajax).responseText;return $.parseJSON(content).data||null}catch(e){return null}},initVirtualKeyboard:function initVirtualKeyboard(){var input=[document.getElementsByTagName("input"),document.getElementsByTagName("textarea")];for(var x=0,elem;elem=input[x++];){for(var y=0,ex;ex=elem[y++];)if(ex.type=="text"||ex.type=="password"){if(typeof VKI_attach!=="undefined"&&ex.className.indexOf("keyboardInput")>-1&&ex.id!="reg_date_birthday")VKI_attach(ex)}}},reset:function reset(){this.params_modal={type:"html",overlay:{css:{backgroundColor:"#000",opacity:.7}},content:null,beforeClose:function beforeClose(){},afterOpen:function afterOpen(){},afterClose:function afterClose(){}};this.params_ajax={url:"",type:"GET",async:false,cache:false};this.finalFunction=function(){}},isOpen:function isOpen(id){if($(".arcticmodal-container #"+id).length){return true}return false},initChecking:function initChecking(type){if(typeof type==="object"&&type!==null){if("type"in type&&"id"in type){if(!this.isOpen(type.id)){return type.type}}return null}return type},accessPopup:function accessPopup(type){var slot_popup_access=["postReg","participationBonus","addPhone","fastDeposit","changed_password"];switch(getRefId()){case 153:case 51:switch(type){case"addPhone":case"matchPromo":case"support_question":case"fastDeposit":case"reg_auth":return true;default:return false}case 99:if(slot_popup_access.indexOf(type)===-1){console.log("do not show");return false}break;case 15:case 20:case 109:return type!=="changed_password"}return true},init:function init(type,params){type=type||null;type=this.initChecking(type);if(type===null||!(type in this)||!this.accessPopup(type)){return false}this.params_ajax.url="/api/internal/popup/".concat(type);this.params_ajax.data=params||{};if(!this[type](arguments))return false;this.params_modal.content=this.getContent();if(!this.params_modal.content)return false;this.params_modal.content="<div>"+this.params_modal.content+"</div>";this.arcticmodal();this.finalFunction();this.reset();this.initVirtualKeyboard();return true},addPhone:function addPhone(arg){var text=arg[1]||"",userPhone=arg[2]||null,notAuth=arg[3]||null,VKI_attach1=arg[4]||undefined;this._postReg([null,null,{text:text,userPhone:userPhone,notAuth:notAuth,VKI_attach:VKI_attach1},null,null]);return true},credit:function credit(){this.finalFunction=function(){$(".box-modal.creditBet_modal .div2 .scroll").perfectScrollbar()};return true},callBack:function callBack(arg){this.params_modal.afterClose=function(){var expdate=new Date;FixCookieDate(expdate);expdate.setTime(expdate.getTime()+1*24*60*60*1e3);SetCookie("helper",1,expdate,"/")};this.finalFunction=function(){$("#help_popup #callBack").on("click",callbackRequest)};return true},registration:function registration(arg){if(Core.cookie.get("ua",0)){return false}this.finalFunction=function(){$("#help_popup #callBack").on("click",callbackRequest);$("#help_popup .p-reghelp-footer").on("click",function(){$("._wc-module").trigger("click");$(".rh-reset #rh-badgeImage").trigger("click")})};return true},participationBonus:function participationBonus(){if(Core.cookie.get("ua")&&Core.cookie.get("popup_first_dep")){this.params_modal.beforeClose=function(){sendAnalyticsData("Бонус за пополнение (pop-up)","Закрытие Бонус за пополнение (pop-up)","","Закрытие-Бонус-за-пополнение-(pop-up)")};this.finalFunction=function(){DeleteCookie("popup_first_dep","/","");sendAnalyticsData("Бонус за пополнение (pop-up)","Всплытие Бонус за пополнение (pop-up)","","Всплытие-Бонус-за-пополнение-(pop-up)")};return true}return false},creditModal:function creditModal(){this.finalFunction=function(){$(".box-modal.creditBet_modal .div2 .scroll").perfectScrollbar()};return true},partnersContact:function partnersContact(){return true},vipDomain:function vipDomain(arg){var dictionary1=arg[1]||null,$_this=this;this.params_modal.overlay={css:{backgroundColor:"#000",opacity:.5,zIndex:1e3}};this.finalFunction=function(){var form_id="#popup_vipdomain";$(document).one("click",form_id+" #vip_close",function(event){event.preventDefault();SetCookie("VipPopup",1,expDate(2),"/");$.arcticmodal("close")}).on("click",form_id+" #vip_send",function(event){event.preventDefault();var $_input_send=$(".popup_domain_personal_more .wrapper_input_email");if($_input_send.css("display")=="none"){$_input_send.css("display","flex")}else{$_input_send.css("display","none")}}).on("click",form_id+" .send_email",function(event){event.preventDefault();$_this.sendVipDomain(dictionary1,1)});form_id=null};return true},sendVipDomain:function sendVipDomain(dictionary1,type){var dictionary1=dictionary1||null,type=type||0,email=$("#vip_domain").val()||null;if(type&&!email)return;$.ajax({type:"POST",url:"user/mailing",cache:false,data:{"mail_type":"vipDomain","type":type,"umail":email},success:function success(data){if(type===1)$("#vip_send").trigger("click");if(dictionary1!==null)alerts(dictionary1.message,data)}})},vip2017:function vip2017(){this.params_modal.closeOnEsc=false;this.params_modal.closeOnOverlayClick=false;return true},access_difficulties:function access_difficulties(){return true},lucky_wheel:function lucky_wheel(){return true},changed_password:function changed_password(){return true},royal_action:function royal_action(){this.finalFunction=function(){$(".royal-popup__link").on("click",function(e){e.preventDefault();Core.cookie.set("royal_action",1,{expires:expDate(3)},"/");$.arcticmodal("close")})};return true},support_question:function support_question(){if(this.common_params.opening.support_question){return false}this.common_params.opening.support_question=true;this.finalFunction=function(){this.common_params.opening.support_question=false};return true},_postReg:function _postReg(arg){var bind_phone_slide=arg[2]||null;var bonus_deposit_slide=arg[3]||null;var bonus_offer_slide=arg[4]||null;this.params_modal.afterOpen=function(){$(document).on("click",".popup_skip, .popup-pages__item",function(){if(!$(this).is(".active")){var $id=$(this).attr("data-type"),$nextItem=$("#"+$id),$activeItem=$(".popup_bg_block.active"),$btn=$(".popup-pages__item"),$btnNext=$('.popup-pages__item[data-type="'+$id+'"]');if($("#hidden-close").hasClass("postreg-popup__close")){$("#bonus-offer").find(".popup_skip").addClass("arcticmodal-close")}$nextItem.addClass("active");$activeItem.addClass("rotate").css("z-index","2");setTimeout(function(){$activeItem.removeClass("rotate active").css("z-index","")},500);$btn.removeClass("active");$btnNext.addClass("active")}})};if(bind_phone_slide){bind_phone_slide.text=bind_phone_slide.text||"";bind_phone_slide.userPhone=bind_phone_slide.userPhone||null;bind_phone_slide.notAuth=bind_phone_slide.notAuth||null;bind_phone_slide.VKI_attach=bind_phone_slide.VKI_attach||undefined}if(bonus_offer_slide){bonus_offer_slide.dictionary=bonus_offer_slide.dictionary||""}this.finalFunction=function(){var popup_elem=$("#postreg_popup");if(getRefId()===78){$("#addTelNum").mask("+7 999 999 99 99")}if(getRefId()===99){this.formatedFieldPnoneNumb()}if(bind_phone_slide){var bind_phone_slide_elem=$("#bind-phone");if(bind_phone_slide.text){bind_phone_slide_elem.find("#addTelNum").val(bind_phone_slide.text);bind_phone_slide_elem.find(".submit").on("click",function(){bind_phone_slide.userPhone.editUserPhoneNumber("activate");return false})}else{bind_phone_slide_elem.find(".submit").on("click",function(){bind_phone_slide.userPhone.editUserPhoneNumber("submit");return false})}if(typeof bind_phone_slide.VKI_attach!=="undefined"){var inputs=bind_phone_slide_elem.find(".keyboardInput"),length=inputs.length;for(var i=0;i<length;i++){bind_phone_slide.VKI_attach(inputs[i])}}}if(bonus_offer_slide){var $variants=$("#bonus-offer .bonuses_registration"),loading=false;$variants.on("click",function(){if(loading){return}var $this=$(this);loading=true;$.ajax({url:"/api/internal/user/update-user-bonus",type:"POST",data:"answer="+$(this).data("answer"),dataType:"json",success:function success(response){loading=false;alerts(bonus_offer_slide.dictionary.message,response.Message,2);if(response.Status===1){return}$variants.removeClass("active");$this.addClass("active");if($variants.length===2){popup_elem.arcticmodal("close");return}var $button=$this.closest(".bonuses_registration_selection").next(".popup_skip");if($button.length){$button.click()}}})})}};return false},postReg:function postReg(arg){this.params_modal.closeOnOverlayClick=false;this._postReg(arg);return true},change_kz:function change_kz(){this.params_modal.closeOnEsc=false;this.params_modal.closeOnOverlayClick=false;return true},couponEditing:function couponEditing(){return true},promoPoints:function promoPoints(){if(Core.cookie.get("ua")===null){return false}this.params_modal.closeOnEsc=false;this.params_modal.closeOnOverlayClick=false;return true},warningPopup:function warningPopup(){this.params_modal.closeOnEsc=false;this.params_modal.closeOnOverlayClick=false;return true},olympicgames:function olympicgames(){return true},lotteryOfChampions:function lotteryOfChampions(){return getRefId()===65},select_1st_deposit_bonus:function select_1st_deposit_bonus(){this.params_modal.closeOnEsc=false;this.params_modal.closeOnOverlayClick=false;if(getRefId()===233){window.openBonusOfferPopup();return false}this.finalFunction=function(){document.querySelectorAll(".js-select-bonus").forEach(function(element){var handleBonusClick=function handleBonusClick1(event){event.preventDefault();var choice=parseInt(event.currentTarget.dataset.choice);if(!Number.isNaN(choice)){$.ajax({url:"/api/internal/user/update-user-bonus-choice",type:"POST",data:$.param({choice:choice}),success:function success(response){var registration_create_acc=Vue.prototype.$analytics.registration_create_acc;if(response.success){alerts(dictionary["message"],response.message,1);$("#select_1st_deposit_bonus").arcticmodal("close");registration_create_acc.choiceOfFirstDeposit();element.removeEventListener("click",handleBonusClick)}else{alerts("",dictionary["queryError"],0)}}})}};element.addEventListener("click",handleBonusClick)});document.querySelector(".bonuses-tabs__content").style.display="block";var $tab_wrap=$(".bonuses-tabs__wrap");if($tab_wrap.lengths){$tab_wrap.addClass("scrollbar-inner").scrollbar()}$(".bonus-box").on("click",function(){var $this=$(this),$this_id=$this.attr("data-tab"),$tab=$(".bonuses-tabs__content"),$tab_wrap=$(".bonuses-tabs__wrap"),$tab_active=$("#"+$this_id),$tab_active_h=$tab_active.outerHeight(),$check=$this.find(".switcher__input");if($this.hasClass("active")){return}$tab.fadeOut(200);$tab_wrap.stop().animate({height:$tab_active_h},200,function(){$tab_wrap.height($tab_active_h);$("#"+$this_id).fadeIn(200)});$check.prop("checked",true);$this.addClass("active").siblings().removeClass("active")});$(".btn-pay").on("click",function(e){e.preventDefault();var $choice=$(".switcher__input:checked"),params={choice:0};if(!$choice.length){alerts("",dictionary["select_bonus_type"],0);return}params.choice=parseInt($choice.val());$.ajax({url:"/api/internal/user/update-user-bonus-choice",type:"POST",data:$.param(params),success:function success(response){var registration_create_acc=Vue.prototype.$analytics.registration_create_acc;if(response["success"]){alerts(dictionary["message"],response["message"],1);$("#select_1st_deposit_bonus").arcticmodal("close");registration_create_acc.choiceOfFirstDeposit()}else{alerts("",dictionary["queryError"],0)}}})})};return true},saveUserBonusAgreeDecision:function saveUserBonusAgreeDecision(answer,bonus_offer_slide,popup_elem){$.ajax({url:"/api/internal/user/update-user-bonus",type:"POST",data:"answer="+answer,dataType:"json"}).done(function(responce){if(answer===0){$(".user-money_balance.bonuses").remove()}var message=responce.Message;alerts(bonus_offer_slide.dictionary.message,message,2);popup_elem.arcticmodal("close")}).fail(function(){Popup.unknownErrorPostReg(popup_elem)})},unknownErrorPostReg:function unknownErrorPostReg(target){alerts(dictionary.error,dictionary.errorServer,2);target.find(".bonus_offer_preload").hide()},fastDeposit:function fastDeposit(){return true},set_callback:callbackXHR,reg_auth:function reg_auth(){return true},formatedFieldPnoneNumb:function formatedFieldPnoneNumb(){var field=document.getElementById("addTelNum");field.onkeyup=function(){this.value=this.value.trim().replace(/\D/g,"")}}};